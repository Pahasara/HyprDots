# github.com/pahasara/HyprDots
#
# INFO: Optimized for Intel i7-1355U with Iris Xe Graphics.
#

##################
#     VIDEO      #
##################
# Vulkan Video Setup
vo=gpu-next                    # Latest GPU video output
gpu-api=vulkan                 # Use Vulkan rendering API
hwdec=vulkan,auto-safe         # Prefer Vulkan hardware decoding
hwdec-codecs=all               # Enable hwdec for all supported formats
hwdec-software-fallback=yes    # Allow software fallback if needed

# Vulkan Optimizations
vulkan-async-compute=yes       # Enable async compute queues
vulkan-async-transfer=yes      # Enable async transfer queues
vulkan-queue-count=1           # Single queue for consistency

# Display & Sync
video-sync=display-resample    # Smooth playback, avoid drops/tearing
dither-depth=auto              # Optimal dithering bitdepth
interpolation=yes              # Motion interpolation for smoother playback
tscale=oversample              # Temporal interpolation method


##################
#    SCALING     #
##################
# Luma Scaling (Brightness/Detail)
scale=ewa_lanczossharp         # High-quality luma upscaling
scale-blur=0.981251            # Slight blur for natural look
scale-antiring=0.8             # Reduce ringing artifacts
sigmoid-upscaling=yes          # Better light distribution

# Luma Downscaling
dscale=catmull_rom             # Smooth downscaling algorithm
dscale-antiring=0.7            # Moderate antiring for downscaling
correct-downscaling=yes        # Better quality when downscaling
linear-downscaling=yes         # Linear light downscaling

# Chroma Scaling (Color)
cscale=ewa_lanczossharp        # High-quality chroma scaling
cscale-antiring=0.7            # Reduce color artifacts

# HQ Shaders (comment if not needed)
glsl-shader="~/.config/mpv/shaders/SSimSuperRes.glsl"      # AI upscaling
glsl-shader="~/.config/mpv/shaders/PixelClipper.glsl"      # Better downscaling
glsl-shader="~/.config/mpv/shaders/Cfl_Prediction.glsl"    # Chroma enhancement


##################
#   DEBANDING    #
##################
deband=yes                     # Enable debanding filter
deband-iterations=2            # Balance quality vs performance
deband-threshold=40            # Moderate deband strength
deband-range=16                # Moderate deband range  
deband-grain=4                 # Light grain to hide banding


##################
#     AUDIO      #
##################
# Language & Volume
alang=jpn,jp,eng,en           # Preferred audio language order
volume=50                     # Start at 50% volume
volume-max=120                # Allow volume boost up to 120%
volume-gain=12                # Digital gain for quiet content

# Audio Quality
audio-device=auto             # Auto-select best audio device
audio-exclusive=no            # Don't lock sound card
audio-samplerate=48000        # Match system sample rate
audio-pitch-correction=yes    # Preserve pitch during speed changes
audio-normalize-downmix=yes   # Normalize surround â†’ stereo conversion

# Resampling
audio-resample-cutoff=0.98    # Preserve high frequencies
audio-resample-filter-size=32 # Balance CPU usage vs quality

# Audio Processing (comment if not needed)
af=dynaudnorm,lavfi=[loudnorm=I=-14:LRA=15:TP=-1.5:linear=false]  # Loudness normalization


##################
#   SUBTITLES    #
##################
# Auto-loading & Language
slang=eng,en,enUS             # Preferred subtitle languages  
sub-auto=fuzzy                # Auto-load based on filename

# Subtitle Appearance
sub-font-size=48              # Readable font size
sub-bold=yes                  # Bold text
sub-blur=0.5                  # Slight blur for smoothness
sub-border-size=3             # Outline width
sub-shadow-offset=0           # No shadow offset
sub-shadow-color='#000000cc'  # Transparent black shadow


##################
#   PERFORMANCE  #
##################
# Cache Settings
cache=yes                     # Enable RAM cache
cache-pause=no                # Don't pause on cache
demuxer-max-bytes=500M        # Max cache size
demuxer-max-back-bytes=100M   # Backward cache size

# Decoder Threading  
vd-lavc-threads=0             # Auto-detect optimal threads
hwdec-software-fallback=yes   # Updated option name
vd-lavc-dr=yes                # Direct rendering optimization

# Shader Cache
gpu-shader-cache-dir=~/.cache/shader_cache/mpv  # Cache compiled shaders


##################
#    GENERAL     #
##################
# Playback Behavior
save-position-on-quit=yes      # Remember playback position
keep-open=no                   # Close after file ends
cursor-autohide=500            # Hide cursor after 500ms

# Window Settings
geometry=60%x60%               # Start at 60% screen size
autofit-larger=50%x50%         # Don't exceed 50% screen size

# OSD & Interface
osd-bar=no                     # Disable volume bar popup
script-opts=osc-timetotal=yes  # Show total time in controls

