#!/bin/bash
set -e

# Change waybar config
if [ "$1" = "top" ]; then
    cp "$HOME/.config/waybar/presets/top/config.jsonc" "$HOME/.config/waybar/config.jsonc"
    cp "$HOME/.config/waybar/presets/top/style.css" "$HOME/.config/waybar/style.css"

elif [ "$1" = "bottom" ]; then
    cp "$HOME/.config/waybar/presets/bottom/config.jsonc" "$HOME/.config/waybar/config.jsonc"
    cp "$HOME/.config/waybar/presets/bottom/style.css" "$HOME/.config/waybar/style.css"

elif [ "$1" = "float" ]; then
    cp "$HOME/.config/waybar/presets/float/config.jsonc" "$HOME/.config/waybar/config.jsonc"
    cp "$HOME/.config/waybar/presets/float/style.css" "$HOME/.config/waybar/style.css"

elif [ "$1" = "slant" ]; then
    cp "$HOME/.config/waybar/presets/slant/config.jsonc" "$HOME/.config/waybar/config.jsonc"
    cp "$HOME/.config/waybar/presets/slant/style.css" "$HOME/.config/waybar/style.css"

elif [ "$1" = "side" ]; then
    cp "$HOME/.config/waybar/presets/side/config.jsonc" "$HOME/.config/waybar/config.jsonc"
    cp "$HOME/.config/waybar/presets/side/style.css" "$HOME/.config/waybar/style.css"

else
    echo "Invalid option: $1"
    echo "Usage: $0 {top|bottom|float|slant|side} [theme]"
    exit 1
fi

echo "Config switched to: $1"

# Change waybar theme
THEME=$2

if [ -n "$THEME" ]; then
    sed -i "s|@import url(\"themes/.*\.css\");|@import url(\"themes/$THEME.css\");|" "$HOME/.config/waybar/style.css"
    echo "Theme switched to: $THEME"
fi

# Restart waybar
$HOME/.config/waybar/waybar.sh &
